import{O as H,r as h,P as Ee,U as Ie,c as K,I as Oe,D as A,R as He,j as a}from"./app-BVHr0_4V.js";import{C as ke,D as De}from"./dialog.esm-BbKstLwH.js";import{I as re}from"./inputtext.esm-DfCb8Qq0.js";import{u as Re}from"./formik.esm-1bbAVfF7.js";import{C as Ke,D as te}from"./dropdown.esm-DnBI-Jup.js";import{I as Fe}from"./inputnumber.esm-BBFHrjup.js";import{C as J}from"./checkbox.esm-B61eUd5X.js";import{D as ne}from"./divider.esm-DRajpVF3.js";import{C as ie,u as Ue,a as ze,f as Le,B as V}from"./button.esm-BRivSMdO.js";import{C as Be}from"./index.esm-D1u-RCzB.js";import{I as $e}from"./image.esm-CtvtWlhG.js";import"./overlayservice.esm-B2tta8N0.js";function B(){return B=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(r[l]=n[l])}return r},B.apply(this,arguments)}function Z(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=r[n];return l}function Me(r){if(Array.isArray(r))return Z(r)}function Ye(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function se(r,t){if(r){if(typeof r=="string")return Z(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(r,t)}}function Xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Je(r){return Me(r)||Ye(r)||se(r)||Xe()}function F(r){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(r)}function Ve(r,t){if(F(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,t||"default");if(F(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Ze(r){var t=Ve(r,"string");return F(t)==="symbol"?t:String(t)}function We(r,t,n){return t=Ze(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function qe(r){if(Array.isArray(r))return r}function Ge(r,t){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var l,d,E,v,y=[],b=!0,N=!1;try{if(E=(n=n.call(r)).next,t===0){if(Object(n)!==n)return;b=!1}else for(;!(b=(l=E.call(n)).done)&&(y.push(l.value),y.length!==t);b=!0);}catch(i){N=!0,d=i}finally{try{if(!b&&n.return!=null&&(v=n.return(),Object(v)!==v))return}finally{if(N)throw d}}return y}}function Qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(r,t){return qe(r)||Ge(r,t)||se(r,t)||Qe()}var er={root:"p-accordion p-component",accordiontab:{root:function(t){var n=t.selected;return K("p-accordion-tab",{"p-accordion-tab-active":n})},content:"p-accordion-content",header:function(t){var n=t.selected,l=t.getTabProp,d=t.tab;return K("p-accordion-header",{"p-highlight":n,"p-disabled":l(d,"disabled")})},headeraction:"p-accordion-header-link",headericon:"p-accordion-toggle-icon",headertitle:"p-accordion-header-text",toggleablecontent:"p-toggleable-content",transition:"p-toggleable-content"}},rr=`
@layer primereact {
    .p-accordion-header-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        user-select: none;
        position: relative;
        text-decoration: none;
    }
    
    .p-accordion-header-link:focus {
        z-index: 1;
    }
    
    .p-accordion-header-text {
        line-height: 1;
        width: 100%;
    }
}
`,L=ie.extend({defaultProps:{__TYPE:"Accordion",id:null,activeIndex:null,className:null,style:null,multiple:!1,expandIcon:null,collapseIcon:null,transitionOptions:null,onTabOpen:null,onTabClose:null,onTabChange:null,children:void 0},css:{classes:er,styles:rr}}),k=ie.extend({defaultProps:{__TYPE:"AccordionTab",className:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,style:null,tabIndex:0,children:void 0},getCProp:function(t,n){return H.getComponentProp(t,n,k.defaultProps)},getCProps:function(t){return H.getComponentProps(t,k.defaultProps)},getCOtherProps:function(t){return H.getComponentDiffProps(t,k.defaultProps)}});function oe(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);t&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),n.push.apply(n,l)}return n}function O(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oe(Object(n),!0).forEach(function(l){We(r,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(n,l))})}return r}var le=function(){},ce=h.forwardRef(function(r,t){var n=Ue(),l=h.useContext(Ee),d=L.getProps(r,l),E=h.useState(d.id),v=ae(E,2),y=v[0],b=v[1],N=h.useState(d.activeIndex),i=ae(N,2),D=i[0],m=i[1],I=h.useRef(null),w=d.onTabChange?d.activeIndex:D,c=h.Children.count(d.children),g={props:d,state:{id:y,activeIndex:D}},x=L.setMetaData(O({},g)),j=x.ptm,de=x.ptmo,T=x.cx,ue=x.isUnstyled;ze(L.css.styles,ue,{name:"accordion"});var f=function(e,o){return k.getCProp(e,o)},_=function(e,o,s){var u={parent:g,context:{index:s,count:c,first:s===0,last:s===c-1,selected:$(s),disabled:f(e,"disabled")}};return n(j("tab.".concat(o),{tab:u}),j("accordiontab.".concat(o),{accordiontab:u}),j("accordiontab.".concat(o),u),de(f(e,"pt"),o,u))},me=function(e,o,s){W(e,o,s)},W=function(e,o,s){if(!f(o,"disabled")){var u=$(s),C=null;if(d.multiple){var P=w||[];C=u?P.filter(function(R){return R!==s}):[].concat(Je(P),[s])}else C=u?null:s;var S=u?d.onTabClose:d.onTabOpen;S&&S({originalEvent:e,index:s}),d.onTabChange?d.onTabChange({originalEvent:e,index:C}):m(C)}e.preventDefault()},pe=function(e,o,s){switch(e.code){case"ArrowDown":fe(e);break;case"ArrowUp":he(e);break;case"Home":q(e);break;case"End":G(e);break;case"Enter":case"NumpadEnter":case"Space":be(e,o,s);break}},fe=function(e){var o=Q(e.target.parentElement.parentElement);o?U(o):q(e),e.preventDefault()},he=function(e){var o=ee(e.target.parentElement.parentElement);o?U(o):G(e),e.preventDefault()},q=function(e){var o=ge();U(o),e.preventDefault()},G=function(e){var o=ve();U(o),e.preventDefault()},be=function(e,o,s){W(e,o,s),e.preventDefault()},Q=function p(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=o?e:e.nextElementSibling,u=A.findSingle(s,'[data-pc-section="header"]');return u?A.getAttribute(u,"data-p-disabled")?p(u.parentElement):A.findSingle(u,'[data-pc-section="headeraction"]'):null},ee=function p(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=o?e:e.previousElementSibling,u=A.findSingle(s,'[data-pc-section="header"]');return u?A.getAttribute(u,"data-p-disabled")?p(u.parentElement):A.findSingle(u,'[data-pc-section="headeraction"]'):null},ge=function(){return Q(I.current.firstElementChild,!0)},ve=function(){return ee(I.current.lastElementChild,!0)},U=function(e){e&&A.focus(e)},$=function(e){return d.multiple&&Array.isArray(w)?w&&w.some(function(o){return o===e}):w===e};if(h.useImperativeHandle(t,function(){return{props:d,getElement:function(){return I.current}}}),Le(function(){y||b(Ie())}),!y)return null;var ye=function(e,o,s){var u=O(O({},f(e,"style")||{}),f(e,"headerStyle")||{}),C=y+"_header_"+s,P=y+"_content_"+s,S=f(e,"disabled")?-1:f(e,"tabIndex"),R=n({className:T("accordiontab.headertitle")},_(e,"headertitle",s)),z=k.getCProps(e),M=f(e,"headerTemplate")?H.getJSXElement(f(e,"headerTemplate"),z):h.createElement("span",R,H.getJSXElement(f(e,"header"),z)),Y=n({"aria-hidden":"true",className:T("accordiontab.headericon")},_(e,"headericon",s)),Se=o?d.collapseIcon||h.createElement(Ke,Y):d.expandIcon||h.createElement(Be,Y),we=Oe.getJSXIcon(Se,O({},Y),{props:d,selected:o}),_e=n({className:K(f(e,"headerClassName"),f(e,"className"),T("accordiontab.header",{selected:o,getTabProp:f,tab:e})),style:u,"data-p-highlight":o,"data-p-disabled":f(e,"disabled")},_(e,"header",s)),Ne=n({id:C,href:"#"+P,className:T("accordiontab.headeraction"),role:"button",tabIndex:S,onClick:function(X){return me(X,e,s)},onKeyDown:function(X){return pe(X,e,s)},"aria-disabled":f(e,"disabled"),"aria-controls":P,"aria-expanded":o},_(e,"headeraction",s));return h.createElement("div",_e,h.createElement("a",Ne,we,M))},xe=function(e,o,s){var u=O(O({},f(e,"style")||{}),f(e,"contentStyle")||{}),C=y+"_content_"+s,P=y+"_header_"+s,S=h.createRef(),R=n({id:C,ref:S,className:K(f(e,"contentClassName"),f(e,"className"),T("accordiontab.toggleablecontent")),style:u,role:"region","aria-labelledby":P},_(e,"toggleablecontent",s)),z=n({className:T("accordiontab.content")},_(e,"content",s)),M=n({classNames:T("accordiontab.transition"),timeout:{enter:1e3,exit:450},in:o,unmountOnExit:!0,options:d.transitionOptions},_(e,"transition",s));return h.createElement(ke,B({nodeRef:S},M),h.createElement("div",R,h.createElement("div",z,f(e,"children"))))},Ce=function(e,o){if(H.isValidChild(e,"AccordionTab")){var s=y+"_"+o,u=$(o),C=ye(e,u,o),P=xe(e,u,o),S=n({key:s,className:T("accordiontab.root",{selected:u})},k.getCOtherProps(e),_(e,"root",o));return h.createElement("div",S,C,P)}return null},je=function(){return h.Children.map(d.children,Ce)},Te=je(),Pe=n({className:K(d.className,T("root")),style:d.style},L.getOtherProps(d),j("root"));return h.createElement("div",B({id:y,ref:I},Pe),Te)});le.displayName="AccordionTab";ce.displayName="Accordion";const fr=({csrf_token:r,visible:t,setVisible:n,categories:l,onChange:d=()=>{},products:E,toast:v})=>{var w;const y=He.createRef(),[b,N]=h.useState(!1),{values:i,handleChange:D,setFieldValue:m}=Re({initialValues:{preorder:!1,order:0,sku:"",name:"",category:(w=l[0])==null?void 0:w.name,price:1,is_new:!1,is_discount:!1,is_tl:!0,is_active:!0,selectedCategory:l[0],selectedProduct:null,images:[]}}),I=()=>{if(i.sku.length===0){v.current.show({severity:"error",summary:"Hata",detail:"Stok Kodu Zorunludur!"});return}if(i.name.length===0){v.current.show({severity:"error",summary:"Hata",detail:"Ürün Adı Zorunludur!"});return}if(i.category.length===0){v.current.show({severity:"error",summary:"Hata",detail:"Kategori Zorunludur!"});return}if(i.price<=0){v.current.show({severity:"error",summary:"Hata",detail:"Fiyat 0 dan büyük olmalıdır!"});return}if(i.images.length===0){v.current.show({severity:"error",summary:"Hata",detail:"En Az Bir Resim Seçmelisiniz!"});return}if(i.preorder&&!i.selectedProduct){v.current.show({severity:"error",summary:"Hata",detail:"Önceden Sıralanacak Ürünü Seçmelisiniz!"});return}N(!0);let c=new FormData;c.append("sku",i.sku),c.append("name",i.name),c.append("category",i.category),c.append("price",i.price),c.append("is_new",i.is_new?1:0),c.append("is_discount",i.is_discount?1:0),c.append("is_tl",i.is_tl?1:0),c.append("is_active",i.is_active?1:0),i.preorder&&c.append("order",i.order),i.images.forEach((g,x)=>{c.append("images["+x+"]",g)}),fetch(route("products.store"),{method:"POST",headers:{"X-CSRF-TOKEN":r},body:c}).then(g=>g.json()).then(g=>{var x;g.status?(v.current.show({severity:"success",summary:"Başarılı",detail:g.message}),m("sku",""),m("name",""),m("category",(x=l[0])==null?void 0:x.name),m("price",1),m("is_new",!1),m("is_discount",!1),m("is_tl",!0),m("is_active",!0),m("images",[]),m("selectedCategory",l[0]),m("selectedProduct",null),d(g.products),n(!1)):v.current.show({severity:"error",summary:"Hata",detail:g.message})}).catch(g=>{v.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{N(!1)})};return a.jsx(a.Fragment,{children:a.jsx(De,{header:"Yeni Ürün Ekle",maximizable:!0,visible:t,style:{width:"50vw"},onHide:()=>n(!1),footer:a.jsxs(a.Fragment,{children:[a.jsx(V,{label:"Kapat",icon:"pi pi-times",size:"small",loading:b,severity:"secondary",onClick:()=>n(!1)}),a.jsx(V,{label:"Kaydet",icon:"pi pi-save",size:"small",loading:b,className:"p-button-success",onClick:I})]}),children:a.jsxs("div",{className:"p-fluid",children:[a.jsxs("div",{className:"mb-3 flex items-center",children:[a.jsx(J,{inputId:"preorder",disabled:b,name:"preorder",onChange:c=>{m("preorder",c.checked)},checked:i.preorder}),a.jsx("label",{htmlFor:"preorder",className:"ml-3 font-bold",children:"Ürünü Önceden Sırala"})]}),i.preorder&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"preorderProducts",className:"font-bold",children:["Hangi Ürünün Altına Koymak İstediğinizi Seçiniz ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(te,{disabled:b,inputId:"preorderProducts",options:E,optionLabel:"name",value:i.selectedProduct,filter:!0,showClear:!1,onChange:c=>{m("order",c.value.order),m("selectedProduct",c.value)}})]}),a.jsx(ne,{}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"email",className:"font-bold",children:["Ürün Stok Kodu ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(re,{disabled:b,id:"email",type:"text",name:"sku",onChange:D,value:i.sku})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Ürün Adı ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(re,{disabled:b,id:"name",type:"text",name:"name",onChange:D,value:i.name})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:" ",className:"font-bold",children:["Ürün Kategorisi ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(te,{disabled:b,inputId:"category",options:l,optionLabel:"name",value:i.selectedCategory,filter:!0,showClear:!1,onChange:c=>{m("category",c.value.name),m("selectedCategory",c.value)}})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"price",className:"font-bold",children:["Ürün Fiyatı ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(Fe,{disabled:b,inputId:"price",name:"price",mode:"currency",currency:i.is_tl?"TRY":"USD",min:0,onChange:c=>{m("price",c.value)},value:i.price})]}),a.jsxs("div",{className:"mb-3 flex items-center",children:[a.jsx(J,{disabled:b,inputId:"is_new",name:"is_new",onChange:c=>{m("is_new",c.checked)},checked:i.is_new}),a.jsxs("label",{htmlFor:"is_new",className:"ml-3 font-bold",children:["Yeni Ürün ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]})]}),a.jsxs("div",{className:"mb-3 flex items-center",children:[a.jsx(J,{disabled:b,inputId:"is_discount",name:"is_discount",onChange:c=>{m("is_discount",c.checked)},checked:i.is_discount}),a.jsxs("label",{htmlFor:"is_discount",className:"ml-3 font-bold",children:["İndirimli Ürün ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]})]}),a.jsx(ne,{}),a.jsxs("div",{className:"mb-3",children:[a.jsx(V,{disabled:b,label:i.images.length>0?`${i.images.length} Adet Resim Seçili`:"Ürün Resimlerini Seçin",icon:"pi pi-image",type:"button",severity:i.images.length>0?"success":"info",onClick:()=>{y.current.click()}}),a.jsx("input",{type:"file",name:"files",id:"files",onChange:c=>{let g=c.target.files,x=[];for(let j=0;j<g.length;j++)g[j].type.includes("image")&&x.push(g[j]);x.length===0&&v.current.show({severity:"warn",summary:"Hata",detail:"Lütfen Sadece Resim Veya Video Dosyaları Seçiniz."}),m("images",x)},accept:"image/*,video/*",style:{display:"none"},multiple:!0,ref:y})]}),a.jsx(ce,{className:"mb-3",hidden:!i.images.length>0,children:a.jsx(le,{header:"Seçili Resimler ("+i.images.length+")",children:a.jsx("div",{className:"grid grid-cols-2 gap-3 lg:grid-cols-3",children:i.images.map((c,g)=>a.jsx($e,{src:URL.createObjectURL(c),alt:"Resim",preview:!0,className:"w-full h-full"},g))})})})]})})})};export{fr as default};
