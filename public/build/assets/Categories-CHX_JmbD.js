import{r as g,j as e}from"./app-knEPdDC0.js";import{D as b}from"./dialog.esm-BtpQ66Q9.js";import{T as P}from"./toolbar.esm-c1hl0ZU9.js";import{I as f}from"./inputtext.esm-Cdcw8WnE.js";import{B as x}from"./button.esm-DOMRb2SC.js";import{D,C as m}from"./column.esm-BKSQnHZ9.js";import{c as T}from"./confirmpopup.esm-BgCnKT3j.js";import"./index.esm-BnbSRX23.js";import"./inputnumber.esm-CZDxZHWo.js";import"./dropdown.esm-BdLh1Gyw.js";import"./overlayservice.esm-KTHHQBtF.js";import"./index.esm-CKXZJMiS.js";import"./index.esm-QteJbvCl.js";const X=({csrf_token:c,visible:w,setVisible:j,toast:s,categoriesAll:v,onChange:d=()=>{}})=>{const[h,o]=g.useState(!1),[y,n]=g.useState(v),[p,C]=g.useState("");return e.jsx(e.Fragment,{children:e.jsx(b,{header:"Kategoriler",maximizable:!0,visible:w,style:{width:"50vw"},onHide:()=>j(!1),children:e.jsxs(D,{value:y,removableSort:!0,editMode:"row",loading:h,header:e.jsx(P,{className:"mb-3",start:()=>e.jsx("p",{children:"Yeni Kategori Ekle"}),center:()=>e.jsx(e.Fragment,{children:e.jsx(f,{size:"small",placeholder:"Yeni Kategori Adı",value:p,onChange:r=>C(r.target.value)})}),end:()=>e.jsx(e.Fragment,{children:e.jsx(x,{icon:"pi pi-save",loading:h,onClick:()=>{if(p.length===0){s.current.show({severity:"error",summary:"Hata",detail:"Kategori adı boş olamaz!"});return}o(!0);let r=new FormData;r.append("name",p),fetch(route("products.storeCategory"),{method:"POST",headers:{"X-CSRF-TOKEN":c},body:r}).then(t=>t.json()).then(t=>{t.status?(s.current.show({severity:"success",summary:"Başarılı",detail:t.message}),d(t.categories),n(t.categories)):s.current.show({severity:"error",summary:"Hata",detail:t.message})}).finally(()=>{o(!1)})},size:"small",severity:"success",tooltip:"Yeni Kategori Ekle"})})}),onRowEditComplete:r=>{let t=[...y],{newData:l,index:a}=r;t[a]=l,o(!0);let u=new FormData;u.append("name",l.name),u.append("_method","PUT"),fetch(route("products.updateCategory",l.id),{method:"POST",headers:{"X-CSRF-TOKEN":c},body:u}).then(i=>i.json()).then(i=>{i.status?(s.current.show({severity:"success",summary:"Başarılı",detail:i.message}),d(i.categories),n(i.categories)):s.current.show({severity:"error",summary:"Hata",detail:i.message})}).finally(()=>{o(!1)}),n(t)},paginator:!0,emptyMessage:"Kategori bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:5,dataKey:"id",children:[e.jsx(m,{field:"id",sortable:!0,header:"ID"}),e.jsx(m,{field:"name",sortable:!0,header:"Kategori Adı",editor:r=>e.jsx(f,{type:"text",size:"small",value:r.value,onChange:t=>r.editorCallback(t.target.value)})}),e.jsx(m,{header:"Düzenle",rowEditor:!0}),e.jsx(m,{header:"Sil",align:"right",style:{width:"3rem"},body:r=>e.jsx(e.Fragment,{children:r.id!==0&&e.jsx(x,{icon:"pi pi-times",className:"ml-2",tooltip:"Kategoriyi Sil",tooltipOptions:{position:"top"},size:"small",onClick:t=>{T({target:t.currentTarget,message:"Kategoriyi silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",acceptClassName:"p-button-danger",accept:()=>{o(!0);let l=new FormData;l.append("_method","DELETE"),fetch(route("products.destroyCategory",r.id),{method:"POST",headers:{"X-CSRF-TOKEN":c},body:l}).then(a=>a.json()).then(a=>{a.status?(s.current.show({severity:"success",summary:"Başarılı",detail:a.message}),d(a.categories),n(a.categories)):s.current.show({severity:"error",summary:"Hata",detail:a.message})}).finally(()=>{o(!1)})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},severity:"danger"})})})]})})})};export{X as default};
